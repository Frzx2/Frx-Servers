<Java_detection>:
    name: "java_detection"

    MDBoxLayout:
        orientation: "vertical"
        padding: "24dp"
        spacing: "20dp"
        md_bg_color: 0.09, 0.09, 0.11, 1

        # ---- HEADER ----
        MDBoxLayout:
            orientation: "horizontal"
            spacing: "12dp"
            size_hint_y: None
            height: "60dp"

            MDIcon:
                icon: "language-java"
                font_size: "40sp"
                theme_text_color: "Custom"
                text_color: 1, 0.4, 0.2, 1

            MDLabel:
                text: "Java Detection"
                font_style: "H5"
                bold: True
                theme_text_color: "Custom"
                text_color: 1, 1, 1, 1
                valign: "center"

        MDSeparator:
            color: 0.25, 0.25, 0.3, 1

        # ---- MAIN CARD ----
        FloatLayout:
            MDCard:
                orientation: "vertical"
                padding: "24dp"
                spacing: "12dp"
                size_hint: None, None
                size: root.width * 0.9, root.height * 0.65
                pos_hint: {"center_x": 0.5, "center_y": 0.52}
                md_bg_color: 0.14, 0.14, 0.16, 1
                elevation: 10

                MDLabel:
                    id: java_display_logo
                    text: "Step 1: Select or enter your Java installation"
                    halign: "center"
                    theme_text_color: "Custom"
                    text_color: 1, 1, 1, 1
                    font_style: "Subtitle1"

                MDTextField:
                    id: java_path_input
                    hint_text: "Selected Java path"
                    mode: "rectangle"
                    readonly: True
                    size_hint_x: 1
                    text_color_normal: 1, 1, 1, 1
                    text_color_focus: 1, 1, 1, 1
                    hint_text_color_normal: 1, 1, 1, 0.7
                    hint_text_color_focus: 1, 1, 1, 0.7
                    line_color_focus: 0.2, 0.6, 1, 1
                    line_color_normal: 1, 1, 1, 0.3
                    icon_right: "folder-search-outline"

                # ---- New Label for compatibility status ----
                MDLabel:
                    id: log_label
                    text: ""  # Initially empty
                    halign: "left"
                    theme_text_color: "Custom"
                    text_color: 0.2, 1, 0.2, 1  # Light green for compatible by default
                    font_style: "Subtitle2"

                ScrollView:
                    size_hint_y: 0.55
                    do_scroll_x: False
                    bar_width: "6dp"

                    MDList:
                        id: java_list
                        adaptive_height: True

                MDSeparator:
                    color: 0.25, 0.25, 0.3, 1

                MDRaisedButton:
                    text: "Browse Java File"
                    md_bg_color: 0.2, 0.6, 1, 1
                    text_color: 1, 1, 1, 1
                    size_hint_x: 1
                    elevation: 6
                    on_release: root.select_java_file()
                    ripple_scale: 0.85

        # ---- FOOTER BUTTONS ----
        MDBoxLayout:
            orientation: "horizontal"
            spacing: "20dp"
            size_hint_y: None
            height: "60dp"
            padding: "10dp"

            MDRaisedButton:
                text: "Back"
                md_bg_color: 0.2, 0.2, 0.25, 1
                text_color: 1, 1, 1, 1
                elevation: 5
                size_hint_x: 0.5
                on_release: root.back()

            MDRaisedButton:
                text: "Confirm"
                md_bg_color: 0.2, 0.6, 1, 1
                text_color: 1, 1, 1, 1
                elevation: 6
                size_hint_x: 0.5
                on_release: root.save_java_file()
